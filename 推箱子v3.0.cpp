#include <stdio.h>
#include <string.h>
#include <iostream>
#include <stdlib.h>
#include <windows.h>
#include <conio.h>
using namespace std;

void clean();
int decision();
int interFace();
int play(int checkPoint);

int moveNumber = 0;
const int maps = 9;

struct dt{
int ditu[15][15];
}map[maps] = {{
{{0,0,0,1,1,1,0,2},{0,0,0,1,6,1,0,2},{1,1,1,1,4,1,0,2},{1,6,0,4,5,1,1,3},{1,1,1,4,0,4,6,3},{0,0,1,0,1,1,1,3},{0,0,1,6,1,0,0,2},{0,0,1,1,1,0,0,2}}
},{
{{1,1,1,1,1,0,0,0,2},{1,5,0,0,1,0,0,0,2},{1,0,4,4,1,0,1,1,3},{1,0,4,0,1,0,1,6,3},{1,1,1,0,1,1,1,6,3},{0,1,1,0,0,0,0,6,3},{0,1,0,0,0,1,0,0,3},{0,1,0,0,0,1,1,1,3},{0,1,1,1,1,1,0,0,2}}
},{
{{0,1,1,1,1,1,1,1,0,2},{0,1,0,0,0,0,0,1,1,3},{1,1,4,1,1,1,0,0,0,3},{1,0,5,0,4,0,0,4,0,3},{1,0,6,6,1,0,4,0,1,3},{1,1,6,6,1,0,0,0,1,2},{0,1,1,1,1,1,1,1,1,2}}
},{
{{0,1,1,1,1,2},{1,1,0,0,1,2},{1,5,4,0,1,2},{1,1,4,0,1,3},{1,1,0,4,0,3},{1,6,4,0,0,3},{1,6,6,7,6,3},{1,1,1,1,1,3}}
},{
{{0,1,1,1,1,0,0,2},{0,1,5,0,1,1,1,2},{0,1,0,4,0,0,1,2},{1,1,1,0,1,0,1,3},{1,6,1,0,1,0,0,3},{1,6,0,4,0,1,0,3},{1,6,0,0,0,4,0,3},{1,1,1,1,1,1,1,3}}
},{
{{0,0,0,1,1,1,1,1,1,1,0,0,2},{1,1,1,1,0,0,0,0,0,1,0,0,2},{1,0,0,0,6,1,1,1,0,1,0,0,2},{1,0,1,0,1,0,0,0,0,1,1,0,2},{1,0,1,0,4,0,4,1,6,0,1,0,2},{1,0,1,0,0,7,0,0,1,0,1,0,2},{1,0,6,1,4,0,4,0,1,0,1,0,2},{1,1,0,0,0,0,1,0,1,0,1,1,3},{0,1,0,1,1,1,6,0,0,0,0,5,3},{0,1,0,0,0,0,0,1,1,0,0,0,3},{0,1,1,1,1,1,1,1,1,1,1,1,3}}
},{
{{0,0,0,1,1,1,1,1,1,3},{0,0,1,1,0,0,1,0,5,3},{0,0,1,0,0,0,1,0,0,3},{0,0,1,4,0,4,0,4,0,3},{0,0,1,0,4,1,1,0,0,3},{1,1,1,0,4,0,1,0,1,3},{1,6,6,6,6,6,0,0,1,2},{1,1,1,1,1,1,1,1,1,2}}
},{
{{0,0,0,1,1,1,1,1,1,2},{0,1,1,1,0,0,0,0,1,2},{1,1,6,0,4,1,1,0,1,3},{1,6,6,4,0,4,0,0,5,3},{1,6,6,0,4,0,4,0,1,3},{1,1,1,1,1,1,0,0,1,2},{0,0,0,0,0,1,1,1,1,2}}
},{
{{0,1,1,1,1,1,1,1,1,1,2},{0,1,0,0,1,1,0,0,0,1,2},{0,1,0,0,0,4,0,0,0,1,2},{0,1,4,0,1,1,1,0,4,1,2},{0,1,0,1,6,6,6,1,0,1,2},{1,1,0,1,6,6,6,1,0,1,3},{1,0,4,0,0,4,0,0,4,0,3},{1,0,0,0,0,0,1,0,5,0,3},{1,1,1,1,1,1,1,1,1,1,3}} 
}
};
struct dt2{
int ditu2[15][15];
}d2[maps] = {{
{{0,0,0,1,1,1,0,2},{0,0,0,1,6,1,0,2},{1,1,1,1,4,1,0,2},{1,6,0,4,5,1,1,3},{1,1,1,4,0,4,6,3},{0,0,1,0,1,1,1,3},{0,0,1,6,1,0,0,2},{0,0,1,1,1,0,0,2}}
},{
{{1,1,1,1,1,0,0,0,2},{1,5,0,0,1,0,0,0,2},{1,0,4,4,1,0,1,1,3},{1,0,4,0,1,0,1,6,3},{1,1,1,0,1,1,1,6,3},{0,1,1,0,0,0,0,6,3},{0,1,0,0,0,1,0,0,3},{0,1,0,0,0,1,1,1,3},{0,1,1,1,1,1,0,0,2}}
},{
{{0,1,1,1,1,1,1,1,0,2},{0,1,0,0,0,0,0,1,1,3},{1,1,4,1,1,1,0,0,0,3},{1,0,5,0,4,0,0,4,0,3},{1,0,6,6,1,0,4,0,1,3},{1,1,6,6,1,0,0,0,1,2},{0,1,1,1,1,1,1,1,1,2}}
},{
{{0,1,1,1,1,2},{1,1,0,0,1,2},{1,5,4,0,1,2},{1,1,4,0,1,3},{1,1,0,4,0,3},{1,6,4,0,0,3},{1,6,6,7,6,3},{1,1,1,1,1,3}}
},{
{{0,1,1,1,1,0,0,2},{0,1,5,0,1,1,1,2},{0,1,0,4,0,0,1,2},{1,1,1,0,1,0,1,3},{1,6,1,0,1,0,0,3},{1,6,0,4,0,1,0,3},{1,6,0,0,0,4,0,3},{1,1,1,1,1,1,1,3}}
},{
{{0,0,0,1,1,1,1,1,1,1,0,0,2},{1,1,1,1,0,0,0,0,0,1,0,0,2},{1,0,0,0,6,1,1,1,0,1,0,0,2},{1,0,1,0,1,0,0,0,0,1,1,0,2},{1,0,1,0,4,0,4,1,6,0,1,0,2},{1,0,1,0,0,7,0,0,1,0,1,0,2},{1,0,6,1,4,0,4,0,1,0,1,0,2},{1,1,0,0,0,0,1,0,1,0,1,1,3},{0,1,0,1,1,1,6,0,0,0,0,5,3},{0,1,0,0,0,0,0,1,1,0,0,0,3},{0,1,1,1,1,1,1,1,1,1,1,1,3}}
},{
{{0,0,0,1,1,1,1,1,1,3},{0,0,1,1,0,0,1,0,5,3},{0,0,1,0,0,0,1,0,0,3},{0,0,1,4,0,4,0,4,0,3},{0,0,1,0,4,1,1,0,0,3},{1,1,1,0,4,0,1,0,1,3},{1,6,6,6,6,6,0,0,1,2},{1,1,1,1,1,1,1,1,1,2}}
},{
{{0,0,0,1,1,1,1,1,1,2},{0,1,1,1,0,0,0,0,1,2},{1,1,6,0,4,1,1,0,1,3},{1,6,6,4,0,4,0,0,5,3},{1,6,6,0,4,0,4,0,1,3},{1,1,1,1,1,1,0,0,1,2},{0,0,0,0,0,1,1,1,1,2}}
},{
{{0,1,1,1,1,1,1,1,1,1,2},{0,1,0,0,1,1,0,0,0,1,2},{0,1,0,0,0,4,0,0,0,1,2},{0,1,4,0,1,1,1,0,4,1,2},{0,1,0,1,6,6,6,1,0,1,2},{1,1,0,1,6,6,6,1,0,1,3},{1,0,4,0,0,4,0,0,4,0,3},{1,0,0,0,0,0,1,0,5,0,3},{1,1,1,1,1,1,1,1,1,1,3}} 
}
};
//?????????? 

struct x{
int sh;//?????? 
int sl;//?????? 
}xx[maps]={
{8,8},
{9,9},
{7,10},
{8,6},
{8,8},
{11,13},
{8,10},
{7,10},
{9,11}
};
//??????????????¡ã???????????????????????¡ã?????¡ã??????

struct automatic{
int zd[150];
}automatic[maps]={{1,2,3,3,4,2,2,1,4,4},
{4,4,2,2,2,2,4,2,2,3,3,1,4,2,4,1,3,1,4,4,4,2,4,1,1,2,3,3,3,3,1,1,1,1,3,3,2,4,1,4,2,2,2,2,4,2,2,3,3,1,4,2,4,1,3,1,4,4,4,2,4,1,3,3,3,3,1,1,1,3,3,2,4,1,4,2,2,2,4,2,2,3,3,1,4,2,4,1,3,1,4,4,4},
{4,4,4,2,2,4,4,1,1,3,1,1,3,3,3,3,2,2,3,2,4,1,4,2,1,3,1,1,4,4,4,4,2,2,3,3,3,4,4,4,1,1,3,3,3,3,2,2,3,2,4,1,4,3,1,1,4,4,4,4,2,2,4,4,1,3,2,3,3,3,3,3,1,1,4,4,4,4,2,4,2,3,3,3,3,4,4,4,1,1,3,3,3,3,2,2,2,3,1,4,4,4,4,4,4,2,3,2,3,1,4,1,3,3,3,4,4,4,1,1,3,3,3,3,2,2},
{4,2,4,2,4,2,2,3,3,4,4,1,1,3,2,3,4,1,1,3,2,2,1,1,1,1,4,2,2,2,3,2,4,1,4,2},
{4,2,4,4,2,2,4,2,2,3,3,1,3,3,2,3,1,4,4,4,2,4,4,1,1,3,1,1,3,3,2,2,1,1,4,4,2,2,4,2,2,3,3,3,3,4,4,1,3,3}
};
//?????¡§?¡ì???¡§????????¡ã???????¡ã¡§?????????

enum object {kong,qiang,huanhang,qianghuanhang,xiangzi,renwu,mubiao,mubiaoxiangzi,mubiaorenwu};

void clean(){
	Sleep(200);
	system("cls");
}

int decision(){
	int checkPoint = 0;
	clean();
	cout << "????????????¡Á????¡¦?????????????????¡§???????¨®????\n0 = ¡¦????¡Â????\n";
	
    cin >> checkPoint;
    
    if(checkPoint >= maps){
    	cout << "?????¡ì¡ã???????????????"  << endl;
		Sleep(1000);clean();decision();
	}else if(checkPoint == 0){
		interFace();
	}
	
	moveNumber = 0;
	
    clean();play(checkPoint + 1);
	return 0;
}

int play(int checkPoint){
	system("cls");
	
	printf("???¡ã????%d??\n\n¡¦??¨¾?¨¹??????wsad = ????¡Á¨®?? z = ¡Á???????\n0 = ¡¦??????????? n = ???¡§????\n",checkPoint);
	printf("???¡ã??????:%d\n",moveNumber);

for(int j=0;j<xx[gq].sh;j++){//??????
for(int i=0;i<xx[gq].sl;i++){//???
zhi=d[gq].ditu[j][i];
switch(zhi){
case kong:{printf("  ");break;}
case qiang:{printf("¡§?");break;}
case huanhang:{printf("\n");break;}
case qianghuanhang:{printf("¡§?\n");break;}
case xiangzi:{printf("??");break;}
case renwu:{
switch(z_xiang){
case 1:{
	printf("?¡Â");
	break;
}
case 2:{
	printf("¡§?");
	break;
}
case 3:{
	printf("< ");
	break;
}
case 4:{
	printf(" >");
	break;
}
}
h=j;l=i;break;}
case mubiao:{printf("??");break;}
case mubiaoxiangzi:{printf("??");break;}
case mubiaorenwu:{
switch(z_xiang){
case 1:{
	printf("??");
	break;
}
case 2:{
	printf("¡§?");
	break;
}
case 3:{
	printf("??");
	break;
}
case 4:{
	printf("??");
	break;
}
}
h=j;l=i;break;}
}
}
}

cout << "???¡ã????????\n" ;


if(boo==0){
fx = getch();

switch(fx){
	case 119:{
		fx =1;
		break;
	}
	case 115:{
		fx =2;
		break;
	}
	case 97:{
		fx =3;
		break;
	}
	case 100:{
		fx =4;
		break;
	}
	case 122:{
		fx =5;
		break;
	}
	
	case 87:{
		fx =1;
		break;
	}
	case 83:{
		fx =2;
		break;
	}
	case 65:{
		fx =3;
		break;
	}
	case 68:{
		fx =4;
		break;
	}
	case 90:{
		fx =5;
		break;
	}
	
	case 48:{
		if(maoxian || maoxian3){
			
			if(p){
				cout << "\n?????¨²???¨¦?¡è????????????????????"; 
				lin2 = 0;lin = 0;ptime = 0;maoxian3 = 0;newgame();
				lin3 = 1;cout << "\n??????????\n";jiemian();
			}
			
			cout << "\n?¨²?????¡ã??????????¡¦¨½??????????¡ã????¨®??T/F/S(????)\n";
			int i;lin3 = 1;
			while((i = getch()) != 84){
				if(i == 70){
					lin2 = 0;lin = 0;ptime = 0;maoxian3 = 0;newgame();
					lin3 = 1;g_ptime = 0;g_ydbs = 0;cout << "\n??????????\n";jiemian();break;
				}
				if(i == 83){
					lin2 = 0;ptime -= 2;
					lin3 = 1;lin = 0;guanqia();break;
				}
			}
			baocun(1);lin2 = 0;lin = 0;lin3 = 1;maoxian3 = 0;ptime = 0;newgame();cout << "\n???????????????¨½???????¡¦??\n";
		}
		cout << "\n????¡¦??????????¨®??????????...\n";
		lin3 = 1;lin = 0;
		Sleep(2000);
		qing();
		jiemian();
		break;
	} 
	
	case 110:{
		
		if(!_vip){
			cout << "\n?¨²????vip????????????????\n";Sleep(1000);
			guanqia();
		}
		if(maoxian || maoxian3){
			if(maoxian){
				ptime = g_ptime;ydbs = g_ydbs;
		    }
		    else{
				ptime = g_ptime;ydbs = g_ydbs;
			}
			newgame();guanqia();
		}
		else{
			ptime = 0;ydbs = 0;
			newgame();guanqia();
		}
		break;
	}
	
	case 78:{
		
		if(!_vip){
			cout << "\n?¨²????vip????????????????\n";
			guanqia();
		}
		if(maoxian || maoxian3){
			if(maoxian){
				ptime = g_ptime;ydbs = g_ydbs;
		    }
		    else{
				ptime = g_ptime;ydbs = g_ydbs;
			}
			newgame();guanqia();
		}
		else{
			ptime = 0;ydbs = 0;
			newgame();guanqia();
		}
		break;
	}
	
	default:{
	printf("\n?¨ª?¨®????\n");Sleep(1000);guanqia();
	}
}
}
if(boo == 1){
fx=z[gq].zd[w];w++;delay();}

	actionCheck();
}

int interFace(){
	clean();
	/*{
	FILE *fp;            //????????
	char buf[MAX_LINE];  //??????
	int len;             //??¡Á?¡¦?????
	int shuju[102];
	int i = 0;
	int boo;
		if((fp = fopen("F:\\p.txt","r")) == NULL){
 			cout << "?????¨²?????????????¡¦?????¨§?¡è????¡Á¡Â??¡ã????????¨¹????\n";
 	
 			FILE *fp3 = fopen("D:\\test.txt","w+");
 			srand((unsigned) time(NULL)); 
 			i = rand() % 98 + 1;
 			i *= 100000;
 			i += rand() % 90001 + 10000;
 			fprintf(fp3,"%d",i);
 			fclose(fp3);
 			i = 0;
 	
 	getch();
 	qing();
 	fp = fopen("F:\\p.txt","w+");
		}
	}
	
 while(fgets(buf,MAX_LINE,fp) != NULL)
 {
 len = strlen(buf);
 buf[len] = '\0';  //????????¡¦?
 shuju[i] = atoi(buf);
 i++;
 }
 i--;
 for(int i = 0;i < 15;i++){
 
 switch(i){
 	case 2:{
 		if(lin4) break;
 		if(shuju[i] == 1) _vip = 1;
 		else _vip = 0;
 		lin4 = 1;
		break;
	 }
 }
 }
 
 fclose(fp);
*/

	cout << "			 ????¡Á????¡¦				";
	cout << "\n\n\n		n--???¡§???¡¦--		????--???????¡¦--" ;
	cout << "\n\n\n		s--???¡¦???¡Â		h--????¡ã¨½" ;
	cout << "\n\n\n				ESC?¨¹????";
	cout << "\n\n\n		¡ã?????????v3.0		¡Á¡Â????2841200892";
    
	switch(getch()){
		/*case 121:{//?????????????????¡¦ 
			clean();
			if(!maoxian ||!maoxian2){
			_youke = 1;youke();
			}
			else{
			cout << "?¨²???????????¡ã????????????????????????????????";
			qing();jiemian();
			} 
			break;
		}
		
		case 89:{//?????????????????¡¦ 
			qing();
			if(!maoxian||!maoxian2){
			_youke = 1;youke();
			}
			else{
			cout << "?¨²???????????¡ã????????????????????????????????";
			qing();jiemian();
			}
			break;
		}
		
		case "s":{//???¡¦???¡Â 
			shuoming();
			break;
		}
		
		case 110:{//?¡ã?????? 
		    if(!_vip){
				cout << "?¨²????vip????¡¦¡§????????????";
				qing();
	    		jiemian();
	    		return 0;
			}
			
	    	if(!_youke||!maoxian3){
			maoxian = 1;
			}
			else{
			cout << "?¨²???????????????????¨¾?¡ã???????????????????¡ã????????";
			qing();jiemian();
			}
			
			maoxian = 1;gq = 0;ptime = 0;newgame();maoxian3 = 1;ydbs = 0;guanqia();
			break;
		}
		
		case 78:{//?¡ã?????? 
		    if(!_vip){
				cout << "?¨²????vip????¡¦¡§????????????";
				qing();
	    		jiemian();
	    		return 0;
	    	}
	    	
	    	if(!_youke ||!maoxian3){
			maoxian = 1;
			}
			else{
			cout << "?¨²???????????????????¨¾?¡ã???????????????????¡ã????????";
			qing();jiemian();
			}
			
			gq = 0;ptime = 0;newgame();maoxian = 1;maoxian3 = 1;ydbs = 0;guanqia();
			break;
		}
		
		case 13:{
			qing();
			if(!_vip){
				cout << "?¨²????vip????¡¦¡§????????????";
				qing();
	    		jiemian();
	    		return 0;
	    	}
	    	
	    	if(_youke ||!maoxian3){
			maoxian2 = 1;
			}
			else{
			cout << "?¨²???????????????????¨¾???¡ã????????????????????????";
			qing();jiemian();
			}
			
			_read(1);
			maoxian3 = 1;
			g_ptime = ptime;g_ydbs = ydbs;
			guanqia();
			break;
		}
		
		case "h":{
			//paihang();jiemian();
			break;
		}*/
		
		case 27:{//???????¡¦ 
			cout << "\n\n\n????????!" ; 
			break;
		}
		
		case 110:{
			decision();
			break;
		}
		default:{
			interFace();
			clean();
		}
	}	
		
	clean();
	return 0;
}

int main(){
	interFace();
}
